<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Mesas de Billar</title>
    <link rel="stylesheet" href="style1.css" type="text/css">
    <script type="text/javascript">
      const onOff = (id, start, final,charge) => {
        if(id.src.match("poolT/poolOff.jpg")){
          id.src = "poolT/poolOn.jpg"
          theTime(start);
        }else{
          id.src = "poolT/poolOff.jpg"
          theTime(final);
          charge.innerHTML = theCheck(start, final, charge);
        }
      }

      const theTime = (snap) =>{
        clock = new Date()
        hour = clock.getHours()
        minute = clock.getMinutes()

        str_minute = new String(minute)
        if(str_minute.length == 1){
          minute = "0" + minute
        }

        str_hour = new String(hour)
        if(str_hour.length == 1){
          hour = "0" + hour
        }
        snap.innerHTML = hour + " : " + minute;
      }

      const theCheck = (start, final, charge) =>{
        var sHour = start.innerHTML.toString().substring(0,2);
        var sMin = start.innerHTML.toString().substring(3,5);
        var fHour = final.innerHTML.toString().substring(0,2);
        var fMin = final.innerHTML.toString().substring(3,5);
        var ppHr = (fHour-sHour)*50;
        var ppMin = 0;

        if(fMin > sMin){
          ppMin = fMin-sMin;
        }else if (fMin < sMin) {
          if((fHour-sHour)==1){
            ppHr = 0;
          }
          var minToHr = 60-fMin;
          ppMin = parseInt(minToHr)+parseInt(sMin);
        }
        var priceMin = (50/60)*ppMin;
        var total = parseFloat(priceMin)+parseFloat(ppHr);
        total = total.toFixed(2)
        return "$"+total;
      }
    </script>
  </head>

  <body>
    <table class="center">
        <thead>
          <tr>
            <th>Mesa 1</th>
            <th>Mesa 2</th>
            <th>Mesa 3</th>
          </tr>
        </thead>
          <tr>
            <td><img src="poolT/poolOff.jpg" id="p0" onclick="onOff(p0, start0, final0, charge0)"></td>
            <td><img src="poolT/poolOff.jpg" id="p1" onclick="onOff(p1, start1, final1, charge1)"></td>
            <td><img src="poolT/poolOff.jpg" id="p2" onclick="onOff(p2, start2, final2, charge2)"></td>
          </tr>
          <tr>
            <td id="infoPool0">
              Hora de inicio: <p id="start0"></p>
              Hora final: <p id="final0"></p>
              Costo: <p id="charge0"></p>
            </td>
            <td id="infoPool1">
              Hora de inicio: <p id="start1"></p>
              Hora final: <p id="final1"></p>
              Costo: <p id="charge1"></p>
            </td>
            <td id="infoPool2">
              Hora de inicio: <p id="start2"></p>
              Hora final: <p id="final2"></p>
              Costo: <p id="charge2"></p>
            </td>
          </tr>
        <thead>
            <tr>
            <th>Mesa 4</th>
            <th>Mesa 5</th>
            <th>Mesa 6</th>
          </tr>
        </thead>
          <tr>
            <td><img src="poolT/poolOff.jpg" id="p3" onclick="onOff(p3, start3, final3, charge3)"></td>
            <td><img src="poolT/poolOff.jpg" id="p4" onclick="onOff(p4, start4, final4, charge4)"></td>
            <td><img src="poolT/poolOff.jpg" id="p5" onclick="onOff(p5, start5, final5, charge5)"></td>
          </tr>
          <tr>
            <td id="infoPool3">
              Hora de inicio: <p id="start3"></p>
              Hora final: <p id="final3"></p>
              Costo: <p id="charge3"></p>
            </td>
            <td id="infoPool4">
              Hora de inicio: <p id="start4"></p>
              Hora final: <p id="final4"></p>
              Costo: <p id="charge4"></p>
            </td>
            <td id="infoPool5">
              Hora de inicio: <p id="start5"></p>
              Hora final: <p id="final5"></p>
              Costo: <p id="charge5"></p>
            </td>
          </tr>
    </table>
  </body>
</html>
